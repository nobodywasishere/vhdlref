<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href=css/main.css />
    <link rel="stylesheet" href=css/code.css />
    <link rel="apple-touch-icon" sizes="57x57"         href=assets/icons/apple-icon-57x57.png>
    <link rel="apple-touch-icon" sizes="60x60"         href=assets/icons/apple-icon-60x60.png>
    <link rel="apple-touch-icon" sizes="72x72"         href=assets/icons/apple-icon-72x72.png>
    <link rel="apple-touch-icon" sizes="76x76"         href=assets/icons/apple-icon-76x76.png>
    <link rel="apple-touch-icon" sizes="114x114"       href=assets/icons/apple-icon-114x114.png>
    <link rel="apple-touch-icon" sizes="120x120"       href=assets/icons/apple-icon-120x120.png>
    <link rel="apple-touch-icon" sizes="144x144"       href=assets/icons/apple-icon-144x144.png>
    <link rel="apple-touch-icon" sizes="152x152"       href=assets/icons/apple-icon-152x152.png>
    <link rel="apple-touch-icon" sizes="180x180"       href=assets/icons/apple-icon-180x180.png>
    <link rel="icon" type="image/png" sizes="192x192"  href=assets/icons/android-icon-192x192.png>
    <link rel="icon" type="image/png" sizes="32x32"    href=assets/icons/favicon-32x32.png>
    <link rel="icon" type="image/png" sizes="96x96"    href=assets/icons/favicon-96x96.png>
    <link rel="icon" type="image/png" sizes="16x16"    href=assets/icons/favicon-16x16.png>
</head>


<body>

    <div id="content">

        <title>Configuration Declaration</title>

<span>
    <h2 style="align-items: center;">
        <a href=index.html class="text-norm">
            <img src="assets/icon.svg" alt="logo" style="vertical-align:middle; margin: auto 2px 5px auto; width: 50px; height: 50px" />
            VHDLref
        </a>
    </h2>
</span>

<hr>

<h1>Configuration Declaration</h1>

<br>
<div class="chart">
    <table class="chart">
        <tr>
            <td bgcolor="lightcyan">
                
                Primary Library Unit
                
                
            </td>

            
            
        </tr>

        
        
    </table>
</div>
<br>
<h3 class="text-hr"><span>Syntax</span></h3>

<div class="language-vhdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">configuration</span> <span class="n">config_name</span> <span class="k">of</span> <span class="n">entity_name</span> <span class="k">is</span>
    <span class="k">for</span> <span class="n">architecture_name</span>
        <span class="k">for</span> <span class="n">instance_label</span><span class="p">:</span> <span class="n">component_name</span>
            <span class="k">use</span> <span class="k">entity</span> <span class="n">library_name</span><span class="o">.</span><span class="n">entity_name</span><span class="p">(</span><span class="n">arch_name</span><span class="p">);</span>
            <span class="k">for</span> <span class="n">arch_name</span>

                <span class="c1">--</span>

                <span class="n">lower</span><span class="o">-</span><span class="n">level</span> <span class="k">configuration</span>
                <span class="n">specifications</span>

                <span class="c1">--</span>

            <span class="k">end</span> <span class="k">for</span><span class="p">;</span>
        <span class="k">end</span> <span class="k">for</span><span class="p">;</span>
    <span class="k">end</span> <span class="k">for</span><span class="p">;</span>
<span class="k">end</span> <span class="n">config_name</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-vhdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">configuration</span> <span class="n">config_name</span> <span class="k">of</span> <span class="n">entity_name</span> <span class="k">is</span>
    <span class="k">for</span> <span class="n">architecture_name</span>
        <span class="k">for</span> <span class="n">instance_label</span><span class="p">:</span> <span class="n">component_name</span>
            <span class="k">use</span> <span class="k">configuration</span> <span class="n">library_name</span><span class="o">.</span><span class="n">cfg_name</span><span class="p">;</span>
        <span class="k">end</span> <span class="k">for</span><span class="p">;</span>
    <span class="k">end</span> <span class="k">for</span><span class="p">;</span>
<span class="k">end</span> <span class="n">config_name</span><span class="p">;</span>
</code></pre></div></div>
<p>See LRM section 1.3</p>

<h3 class="text-hr"><span>Rules and Examples</span></h3>

<p>With first form of component configuration above, a whole hierarchy may be configured from a single declaration.</p>

<p>The second form above is used with a tree of configuration declarations, each one corresponding to a point in the hierarchy.</p>

<p>In the absence of an explicit configuration for any part of a model, <strong>default binding</strong> will occur. For each unbound instance of every component, an entity will be selected whose name, port names and port types etc. match those in the corresponding component declaration. Where an entity has more than one architecture, the <strong>last analyzed</strong> architecture will be used.</p>

<p>The keyword <strong>all</strong> may be used to refer to all instances of a component:</p>
<div class="language-vhdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">configuration</span> <span class="n">CFG_FULLADD</span> <span class="k">of</span> <span class="n">FULLADD</span> <span class="k">is</span>
    <span class="k">for</span> <span class="n">STRUCTURAL</span>
        <span class="k">for</span> <span class="k">all</span> <span class="p">:</span> <span class="n">HALFADD</span> <span class="k">use</span> <span class="k">entity</span>
            <span class="n">work</span><span class="o">.</span><span class="n">HALFADD</span><span class="p">(</span><span class="n">BEHAVE</span><span class="p">);</span>
        <span class="k">end</span> <span class="k">for</span><span class="p">;</span>
    <span class="k">end</span> <span class="k">for</span><span class="p">;</span>
<span class="k">end</span> <span class="n">CFG_FULLADD</span><span class="p">;</span>
</code></pre></div></div>

<p>The keyword <strong>others</strong> may also be used to refer to all instances not explicitly mentioned.</p>

<p>If the port names on an entity do not match those on the component declaration, a port map may be included in the configuration:</p>
<div class="language-vhdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">configuration</span> <span class="n">CFG_FULLADD_DELAY</span> <span class="k">of</span> <span class="n">FULLADD</span> <span class="k">is</span>
    <span class="k">for</span> <span class="n">STRUCTURAL</span>
        <span class="k">for</span> <span class="k">all</span> <span class="p">:</span> <span class="n">HALFADD</span>
            <span class="k">use</span> <span class="k">entity</span> <span class="n">work</span><span class="o">.</span><span class="n">HA</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
            <span class="k">port</span> <span class="k">map</span><span class="p">(</span>
                <span class="n">X</span> <span class="o">=&gt;</span> <span class="n">A</span><span class="p">,</span>
                <span class="n">Y</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="p">,</span>
                <span class="n">S</span> <span class="o">=&gt;</span> <span class="n">SUM</span><span class="p">,</span>
                <span class="n">C</span> <span class="o">=&gt;</span> <span class="n">CARRY</span>
            <span class="p">);</span>
        <span class="k">end</span> <span class="k">for</span><span class="p">;</span>
    <span class="k">end</span> <span class="k">for</span><span class="p">;</span>
<span class="k">end</span> <span class="n">CFG_FULLADD_DELAY</span><span class="p">;</span>
</code></pre></div></div>

<h3 class="text-hr"><span>Synthesis Issues</span></h3>

<p>Configuration is not usually supported by synthesis tools. The user usually has to ensure that component and entity names and ports match, and that only one architecture per entity is analyzed.</p>

<h3 class="text-hr"><span>New in VHDL-93</span></h3>

<p>In VHDL-93, an entity-architecture pair may be directly instantiated, i.e. a component need not be declared. this is more compact, but does not allow the flexibility of configuration.</p>

<p>In VHDL-93, a configuration <strong>specification</strong> for a component (or instance) may legally be overridden by a configuration <strong>declaration</strong> for the same item. This was not allowed in VHDL-87.</p>

<p>In VHDL-93, the keyword <strong>end</strong> may be followed by the keyword <strong>configuration</strong> for clarity and consistency.</p>



<br>
<hr>


        <div id="footer">
            <h6>v1.0 - &copy; 2020 Michael Riegert - <a href="https://github.com/nobodywasishere/vhdlref">View on Github</a>
<br>Distributed under the terms of the <a href="LICENSE.html">MIT License</a></h6>

        </div>
    </div>

</body>

</html>
