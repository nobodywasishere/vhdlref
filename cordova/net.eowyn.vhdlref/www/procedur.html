<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href=css/main.css />
    <link rel="stylesheet" href=css/code.css />
    <link rel="apple-touch-icon" sizes="57x57"         href=assets/icons/apple-icon-57x57.png>
    <link rel="apple-touch-icon" sizes="60x60"         href=assets/icons/apple-icon-60x60.png>
    <link rel="apple-touch-icon" sizes="72x72"         href=assets/icons/apple-icon-72x72.png>
    <link rel="apple-touch-icon" sizes="76x76"         href=assets/icons/apple-icon-76x76.png>
    <link rel="apple-touch-icon" sizes="114x114"       href=assets/icons/apple-icon-114x114.png>
    <link rel="apple-touch-icon" sizes="120x120"       href=assets/icons/apple-icon-120x120.png>
    <link rel="apple-touch-icon" sizes="144x144"       href=assets/icons/apple-icon-144x144.png>
    <link rel="apple-touch-icon" sizes="152x152"       href=assets/icons/apple-icon-152x152.png>
    <link rel="apple-touch-icon" sizes="180x180"       href=assets/icons/apple-icon-180x180.png>
    <link rel="icon" type="image/png" sizes="192x192"  href=assets/icons/android-icon-192x192.png>
    <link rel="icon" type="image/png" sizes="32x32"    href=assets/icons/favicon-32x32.png>
    <link rel="icon" type="image/png" sizes="96x96"    href=assets/icons/favicon-96x96.png>
    <link rel="icon" type="image/png" sizes="16x16"    href=assets/icons/favicon-16x16.png>
</head>


<body>

    <div id="content">

        <title>Procedure</title>

<span>
    <h2 style="align-items: center;">
        <a href=index.html class="text-norm">
            <img src="assets/icon.svg" alt="logo" style="vertical-align:middle; margin: auto 2px 5px auto; width: 50px; height: 50px" />
            VHDLref
        </a>
    </h2>
</span>

<hr>

<h1>Procedure</h1>

<br>
<div class="chart">
    <table class="chart">
        <tr>
            <td bgcolor="lightcyan">
                
                Declaration
                
                
            </td>

            
            
            <td style="border: 0px solid transparent; width: 24%">——used—in—></td>

            <td bgcolor="lightgreen">
                
                Package
                
                <br>
                
                
                Entity
                
                <br>
                
                
                Architecture
                
                <br>
                
                
                Process
                
                <br>
                
                
                Procedure
                
                <br>
                
                
                Function
                
                
            </td>
            
        </tr>

        
        
    </table>
</div>
<br>
<h3 class="text-hr"><span>Syntax</span></h3>

<!-- include the vhdl tag to highlight as vhdl -->
<div class="language-vhdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">procedure</span> <span class="n">procedure_name</span> <span class="p">(</span><span class="n">parameter_list</span><span class="p">)</span> <span class="k">is</span>
    <span class="n">declarations</span>
<span class="k">begin</span>
    <span class="n">sequential</span> <span class="n">statements</span>
<span class="k">end</span> <span class="n">procedure_name</span><span class="p">;</span>
</code></pre></div></div>

<p>See LRM sections 2.1, 2.2, 8.5 and 9.3</p>

<h3 class="text-hr"><span>Rules and Examples</span></h3>

<p>Procedures may have in, out or inout parameters. These may be signal, variable or constant. the default for in parameters is constant. For out and inout it is variable. In fact, a constant in parameter can be associated with a signal, variable constant or expression when the procedure is called:</p>
<div class="language-vhdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">procedure</span> <span class="n">DISPLAY_MUX</span> <span class="p">(</span>
    <span class="n">ALARM_TIME</span><span class="p">,</span> <span class="n">CURRENT_TIME</span> <span class="p">:</span> <span class="k">in</span> <span class="n">digit</span><span class="p">;</span>
    <span class="n">SHOW_A</span> <span class="p">:</span> <span class="k">in</span> <span class="kt">std_ulogic</span><span class="p">;</span>
    <span class="k">signal</span> <span class="n">DISPLAY_TIME</span> <span class="p">:</span> <span class="k">out</span> <span class="n">digit</span>
<span class="p">)</span> <span class="k">is</span>
<span class="k">begin</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">SHOW_A</span> <span class="o">=</span> <span class="sc">'1'</span><span class="p">)</span> <span class="k">then</span>
        <span class="n">DISPLAY_TIME</span> <span class="o">&lt;=</span> <span class="n">ALARM_TIME</span><span class="p">;</span>
    <span class="k">else</span>
        <span class="n">DISPLAY_TIME</span> <span class="o">&lt;=</span> <span class="n">CURRENT_TIME</span><span class="p">;</span>
    <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
<span class="k">end</span> <span class="n">DISPLAY_MUX</span><span class="p">;</span>
</code></pre></div></div>

<p>Procedures may be called concurrently or sequentially. A concurrent procedure call executes whenever any of its in or inout parameters change:</p>
<div class="language-vhdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">architecture</span> <span class="n">SUBPROG</span> <span class="k">of</span> <span class="n">DISP_MUX</span> <span class="k">is</span>
<span class="c1">--</span>
<span class="k">begin</span>
    <span class="n">DISPLAY_MUX</span> <span class="p">(</span><span class="n">ALARM_TIME</span><span class="p">,</span> <span class="n">CURRENT_TIME</span><span class="p">,</span> <span class="n">SHOW_A</span><span class="p">,</span> <span class="n">DISPLAY_TIME</span><span class="p">);</span>
<span class="k">end</span> <span class="n">SUBPROG</span><span class="p">;</span>
</code></pre></div></div>

<p>A procedure may declare local variables. These do not retain their values between successive calls, but are re-initialized each time. Array-type parameters may be unconstrained</p>
<div class="language-vhdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">procedure</span> <span class="n">PARITY</span> <span class="p">(</span>
    <span class="k">signal</span> <span class="n">X</span> <span class="p">:</span> <span class="k">in</span> <span class="kt">std_ulogic_vector</span><span class="p">;</span>
    <span class="k">signal</span> <span class="n">Y</span> <span class="p">:</span> <span class="k">out</span> <span class="kt">std_ulogic</span>
<span class="p">)</span> <span class="k">is</span>
    <span class="k">variable</span> <span class="n">TMP</span> <span class="p">:</span> <span class="kt">std_ulogic</span> <span class="p">:</span><span class="o">=</span> <span class="sc">'0'</span><span class="p">;</span>
<span class="k">begin</span>
    <span class="k">for</span> <span class="n">J</span> <span class="k">in</span> <span class="n">X</span><span class="na">'range</span> <span class="k">loop</span>
        <span class="n">TMP</span> <span class="p">:</span><span class="o">=</span> <span class="n">TMP</span> <span class="ow">xor</span> <span class="n">X</span><span class="p">(</span><span class="n">J</span><span class="p">);</span>
    <span class="k">end</span> <span class="k">loop</span><span class="p">;</span> <span class="c1">-- works for any size X</span>
    <span class="n">Y</span> <span class="o">&lt;=</span> <span class="n">TMP</span><span class="p">;</span>
<span class="k">end</span> <span class="n">PARITY</span><span class="p">;</span>
</code></pre></div></div>

<p>A procedure can contain wait statements, unless it is called from a process with a sensitivity list, or from within a function.</p>

<p>If a procedure is defined in a package, its body (the algorithm part) must be placed in the package body.</p>
<div class="language-vhdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">REF_PACK</span> <span class="k">is</span>
    <span class="k">procedure</span> <span class="n">PARITY</span> <span class="p">(</span>
        <span class="k">signal</span> <span class="n">X</span> <span class="p">:</span> <span class="k">in</span> <span class="kt">std_logic_vector</span><span class="p">;</span>
        <span class="k">signal</span> <span class="n">Y</span> <span class="p">:</span> <span class="k">out</span> <span class="kt">std_logic</span>
    <span class="p">);</span>
<span class="k">end</span> <span class="n">REF_PACK</span><span class="p">;</span>

<span class="k">package</span> <span class="k">body</span> <span class="n">REF_PACK</span> <span class="k">is</span>
    <span class="k">procedure</span> <span class="n">PARITY</span> <span class="p">(</span>
        <span class="k">signal</span> <span class="n">X</span> <span class="p">:</span> <span class="k">in</span> <span class="kt">std_logic_vector</span><span class="p">;</span>
        <span class="k">signal</span> <span class="n">Y</span> <span class="p">:</span> <span class="k">out</span> <span class="kt">std_logic</span>
    <span class="p">)</span> <span class="k">is</span>  
    <span class="k">begin</span>
        <span class="c1">-- procedure code</span>
    <span class="k">end</span> <span class="n">PARITY</span><span class="p">;</span>
<span class="k">end</span> <span class="n">REF_PACK</span><span class="p">;</span>
</code></pre></div></div>

<h3 class="text-hr"><span>Synthesis Issues</span></h3>

<p>Procedures are usually supported for synthesis, providing they do not contain any wait statements.</p>

<h3 class="text-hr"><span>New in VHDL-93</span></h3>

<p>In VHDL-93, the keyword <strong>end</strong> may be followed by the keyword <strong>procedure</strong> for clarity and consistency.</p>

<p>Procedures may be given an optional label.</p>

<p>A concurrent procedure call can be specified to run as a postponed process.</p>



<br>
<hr>


        <div id="footer">
            <h6>v1.0 - &copy; 2020 Michael Riegert - <a href="https://github.com/nobodywasishere/vhdlref">View on Github</a>
<br>Distributed under the terms of the <a href="LICENSE.html">MIT License</a></h6>

        </div>
    </div>

</body>

</html>
